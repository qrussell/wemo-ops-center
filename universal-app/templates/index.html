<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wemo Ops</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="app-bar">
        <div class="brand">WEMO OPS</div>
        <div style="display:flex; gap:10px; align-items:center;">
            <span id="scan-status" class="status-badge">Idle</span>
            <span style="cursor:pointer; font-size:1.2rem;" onclick="toggleTheme()">üåó</span>
        </div>
    </div>

    <div class="container">
        <div id="view-dash" class="view active">
            <div style="display:flex; justify-content:space-between; margin-bottom:15px; align-items:center;">
                <h2 style="margin:0;">Dashboard</h2>
                <button class="btn" style="background:var(--card); border:1px solid var(--border); color:var(--text);" onclick="triggerScan()">üì° Scan</button>
            </div>
            <div id="device-list" class="device-grid">
                <div style="text-align:center; padding:40px; opacity:0.6; grid-column:1/-1;">Connecting...</div>
            </div>
        </div>
        
        <div id="view-auto" class="view">
            <h2>Automation</h2>
            <div class="card">
                <h3>New Rule</h3>
                
                <select id="s-dev" style="width: 100%; margin-bottom: 10px; padding: 10px;"></select>
                
                <div style="display:flex; gap:10px; margin-bottom: 10px;">
                    <select id="s-action" style="flex:1;"><option>Turn ON</option><option>Turn OFF</option><option>Toggle</option></select>
                    <select id="s-type" style="flex:1;"><option>Time (Fixed)</option><option>Sunrise</option><option>Sunset</option></select>
                </div>
                
                <input type="text" id="s-val" placeholder="HH:MM (e.g. 18:30) or Offset (e.g. -30)" style="width: 100%; margin-bottom: 15px;">
                
                <label style="font-size:0.85rem; color:var(--subtext); display:block; margin-bottom:5px;">Active Days</label>
                <div id="s-days" style="display:flex; justify-content:space-between; margin-bottom:15px; background: rgba(0,0,0,0.05); padding: 10px; border-radius: 8px;">
                    <label style="display:flex; flex-direction:column; align-items:center; cursor:pointer;">
                        <span style="font-size:0.8rem; font-weight:bold;">M</span>
                        <input type="checkbox" value="0" checked>
                    </label>
                    <label style="display:flex; flex-direction:column; align-items:center; cursor:pointer;">
                        <span style="font-size:0.8rem; font-weight:bold;">T</span>
                        <input type="checkbox" value="1" checked>
                    </label>
                    <label style="display:flex; flex-direction:column; align-items:center; cursor:pointer;">
                        <span style="font-size:0.8rem; font-weight:bold;">W</span>
                        <input type="checkbox" value="2" checked>
                    </label>
                    <label style="display:flex; flex-direction:column; align-items:center; cursor:pointer;">
                        <span style="font-size:0.8rem; font-weight:bold;">T</span>
                        <input type="checkbox" value="3" checked>
                    </label>
                    <label style="display:flex; flex-direction:column; align-items:center; cursor:pointer;">
                        <span style="font-size:0.8rem; font-weight:bold;">F</span>
                        <input type="checkbox" value="4" checked>
                    </label>
                    <label style="display:flex; flex-direction:column; align-items:center; cursor:pointer;">
                        <span style="font-size:0.8rem; font-weight:bold;">S</span>
                        <input type="checkbox" value="5" checked>
                    </label>
                    <label style="display:flex; flex-direction:column; align-items:center; cursor:pointer;">
                        <span style="font-size:0.8rem; font-weight:bold;">S</span>
                        <input type="checkbox" value="6" checked>
                    </label>
                </div>

                <button class="btn btn-primary" onclick="addSchedule()">+ Add Schedule</button>
            </div>

            <h3 style="margin-top:20px;">Active Schedules</h3>
            <div id="sched-list" class="device-grid"></div>
        </div>

        <div id="view-set" class="view">
            <h2>Settings</h2>
            <div class="card">
                <h3>Network Configuration</h3>
                <label style="font-size:0.9rem; color:var(--subtext); display:block; margin-bottom:5px;">Managed Subnets</label>
                
                <div style="display:flex; gap:10px; margin-bottom:10px;">
                    <select id="subnet-select" onchange="selectSubnet()" style="flex:1; margin-bottom:0;"></select>
                    <button class="btn btn-danger" style="width:auto; padding:10px 15px;" onclick="deleteSubnet()">üóëÔ∏è</button>
                </div>
                
                <div style="display:flex; gap:10px;">
                    <input type="text" id="subnet-input" placeholder="192.168.1.0/24" style="flex:1; margin:0;">
                    <button class="btn btn-primary" style="width:auto; margin:0;" onclick="saveSubnet()">üíæ Save</button>
                </div>
            </div>
            
            <div style="text-align:center; margin-top:30px; color:var(--subtext);">
                {{ version }}<br>Server Online
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="nav('dash')"><span>üè†</span>Home</div>
        <div class="nav-item" onclick="nav('auto')"><span>‚è∞</span>Rules</div>
        <div class="nav-item" onclick="nav('set')"><span>‚öôÔ∏è</span>Setup</div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>